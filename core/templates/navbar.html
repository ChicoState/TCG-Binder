<div class="navbar bg-base-300 bg-base-100">
    <div class="flex-none gap-2">
        <div class="absolute left-0">
            <div class="dropdown dropdown-end">
                <div tabindex="0">
                    <a id="menu1Icon" class="btn btn-ghost text-xl" onclick="toggleDropdown('menu1', 'menu1Icon', 'fa-bars')">
                        <i class="fas fa-bars"></i>
                    </a>
                </div>
            </div>
            <ul id="menu1" tabindex="0" class="absolute left-0 mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content rounded bg-base-100 w-48" style="display: none;">
                <li><a href="{% url 'library' %}" class="justify-between">Library</a></li>
                <li><a href="{% url 'addcard' %}" class="justify-between">Add Card to DB</a></li>
                <li><a href="{% url 'decks' %}" class="justify-between">Decks</a></li>
            </ul>
        </div>
    </div>

    <div class="flex-none gap-2">
        <a href="{% url 'home' %}" class="absolute left-12 btn btn-ghost text-xl ml-2">TCG-Binder</a>
    </div>

    <div class="flex-none gap-2">
        {% if user.is_authenticated %}
            <div class="absolute right-0 dropdown dropdown-end">
                <div tabindex="0" class="flex-1">
                    <a id="menu2Icon" class="btn btn-ghost text-xl" onclick="toggleDropdown('menu2', 'menu2Icon', 'fa-user-circle')">
                        <i class="fas fa-user-circle"></i>
                    </a>
                </div>
                <ul id="menu2" tabindex="0" class="absolute right-0 mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded w-48" style="display: none;">
                    <li><a href="{% url 'profile' %}" class="justify-between">Profile</a></li>
                    <li><a href="{% url 'account_logout' %}">Logout</a></li>
                </ul>
            </div>
        {% else %}
            <div class="absolute right-0">
                <a href="{% url 'account_login' %}" class="btn btn-ghost text-xl ml-2">Login</a>
            </div>
        {% endif %}
    </div>
</div>

<script>
    function toggleDropdown(menuId, iconId, defaultIcon) {
        var menu = document.getElementById(menuId);
        var icon = document.getElementById(iconId);
        if (menu.style.display === "block") {
            menu.style.display = "none";
            icon.innerHTML = '<i class="fas ' + defaultIcon + '"></i>'; // Change icon back to default
        } else {
            menu.style.display = "block";
            icon.innerHTML = '<i class="fas fa-times"></i>'; // Change icon to X
        }
        // Drop down menu doesn't collapse unless x is clicked or user clicks anywhere on the screen
        event.stopPropagation();
    }

    // Make it so when a user clicks one menu then clicks another both menus don't collapse until click anywhere on screen
    document.body.addEventListener('click', function(event) {
        var menu1 = document.getElementById('menu1');
        var menu2 = document.getElementById('menu2');
        var menu1Icon = document.getElementById('menu1Icon');
        var menu2Icon = document.getElementById('menu2Icon');
        var clickedElement = event.target;
        var isMenu1Icon = clickedElement.id === 'menu1Icon';
        var isMenu2Icon = clickedElement.id === 'menu2Icon';
        if (!isMenu1Icon && !menu1.contains(clickedElement)) {
            menu1.style.display = 'none';
            menu1Icon.innerHTML = '<i class="fas fa-bars"></i>';
        }
        if (!isMenu2Icon && !menu2.contains(clickedElement)) {
            menu2.style.display = 'none';
            menu2Icon.innerHTML = '<i class="fas fa-user-circle"></i>';
        }
    });
</script>

